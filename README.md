# URL-Alias-Service
## Дополнительный функционал
К изначальному функционалу добавлены 3 эндпоинта:

1. Эндпоинт регистрации (`/register`)  
2. Эндпоинт аутентификации (`/login`)
3. Эндпоинт логаута (`/logout`)

Для взаимодействия с сервисом необходимо сначала зарегистрироваться (логин и пароль должны быть длиннее 2 символов, например, user/user),
а затем залогиниться (в cookie добавится JWT-токен). 

Все эндпоинты взаимодействия с ссылками приватные,
за исключением эндпоинта редиректа. Их описание доступно в документации.

## Работа с приложением

### Требования

Необходимо, чтобы были установлены следующие компоненты:

- `Docker 20.10+` и `docker compose`
- `Python 3.12+`

### Установка

1. Создание и активация виртуального окружения
```commandline
python -m venv venv
source venv/bin/activate(для Linux и MacOS)
venv\Scripts\activate.bat(для Windows)
```

2. Установка зависимостей

```commandline
pip install -r requirements.txt
```

### Запуск

Все описанные ниже команды запускаются из корня проекта

1. Создать `.env` файл с этими переменными (можно командой `make env`)
```dotenv
DB_HOST=...
DB_PORT=5432
DB_USER=...
DB_PASS=...
DB_NAME=...

APP_HOST=127.0.0.1
APP_PORT=8000

SECRET_KEY=super_secret_key
HASH_ALG0=HS256
```

2. Создание базы в docker-контейнере (чтобы не работать с локальной базой):
```commandline
make db
```
3. Выполнение миграций (перед выполнением убедитесь, что контейнер с базой поднялся):
```commandline
make migrate
```
4. Запуск приложения:
```commandline
make run
```
Посмотреть документацию можно после запуска приложения по адресу `http://127.0.0.1:8000/docs`.
